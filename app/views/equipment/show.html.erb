<div class="container spacer_up_down display__flex-center">
  <div class="row width__100">
    <div class="col-xs-12 col-sm-5 col-sm-offset-1 col-md-5 col-md-offset-1 image-frame--wh400" style="background-image: url(<%= cl_image_path @equipment.photo, crop: :fill %>)">
    </div>
    
    <div class="col-xs-12 col-sm-5 col-md-5 display__flex-center text-frame--wh400">
      <div>
        <p>This Item is Hosted by <%= @equipment.user.user_name %></p>
        <p>Location for Picking up</p>
        <div id="map" style="width: 100%; height: 200px"></div>
        <p class=""><%= @equipment.name %></p>
        <p class="">Category: <%= @equipment.category %></p>
        <p class="">Price: $<%= @equipment.price %> / day</p>
        <p class="">Description: <%= @equipment.description %></p>
        <%= link_to "Book this equipment", new_equipment_contract_path(@equipment), class: "btn btn-primary" %>
      </div>
    </div>
  </div>
</div>

<% content_for(:after_js) do %>
  <%= javascript_tag do %>
    const loadGoogleMap = () => {
      let handler = Gmaps.build('Google')
      handler.buildMap({ internal: {id: 'map'}}, () => {
        markers = handler.addMarkers(<%= raw @hash.to_json %>)
        handler.bounds.extendWith(markers)
        handler.fitMapToBounds()
        if (markers.length === 0) {
          handler.getMap().setZoom(2)
        } else if (markers.length === 1) {
          handler.getMap().setZoom(14)
        }
      })
    }
    loadGoogleMap()
  <% end %>
<% end %>
